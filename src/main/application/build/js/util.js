window.Util=function(){var e={serialize:function(e,t){var r,n,i,o=[];for(r in e)e.hasOwnProperty(r)&&(n=t?t+"["+r+"]":r,i=e[r],o.push(null!==i&&"object"==typeof i?this.serialize(i,n):encodeURIComponent(n)+"="+encodeURIComponent(i)));return o.join("&")},encryptByAES:function(e,t){return t=CryptoJS.enc.Base64.parse(btoa(t)),CryptoJS.AES.encrypt(e,t,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7})},getCurrentHalfHour:function(){var e=new Date,t=2*e.getHours()+1;return 30<=e.getMinutes()&&t++,t},saveSetting:function(e,t){var r=this.getFile(AppConfig.local_settings_file);try{r=JSON.parse(r)}catch(e){console.error(e),r={}}AppConfig.local_settings[e]=t,r[e]=t,r=JSON.stringify(r),this.saveFile(AppConfig.local_settings_file,r)},getImage:function(e,t,r,n){return AppConfig.starz_backend.image_url+e+"/type/"+t+"/dimension/"+r+"?w="+n},getSecondsToMinutes:function(e){return parseInt(e/60)},getSettings:function(){if(!AppConfig.local_settings){var e=Sagem.Get("FS","FILE",AppConfig.local_settings_file);try{AppConfig.local_settings=JSON.parse(e)}catch(e){AppConfig.local_settings={}}}return AppConfig.local_settings},getSetting:function(e){return this.getSettings()[e]},getFile:function(e){return Sagem.Get("FS","FILE",e)},saveFile:function(e,t){return"object"==typeof t&&(t=JSON.stringify(t)),Sagem.Set("FS","FILE",e,t)},getUserAgent:function(){return Sagem.Get("WEBSERVICE","USER_AGENT")},getSessionFromJson:function(){var e,t=this.getFile("/tmp/userConfig.json");if(!t||"string"!=typeof t)return!1;try{e=JSON.parse(t);try{AppConfig.profile=e.userProfile.ProfileVO}catch(e){}return e.session}catch(e){return!1}},parseUri:function e(t){for(var n=e.options,r=n.parser[n.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(i[n.q.name][t]=r)}),i}};return e.parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.getSTBLanguageIso=function(e){e=e||"";return e=(e=e.toLowerCase()).endsWith("-")?e.substring(0,e.length-1):e},e.getIsoLanguage=function(e){switch(e=(e=(e=e||"").toLowerCase()).endsWith("-")?e.substring(0,e.length-1):e){case"spa":case"es":case"unk":return"español";case"eng":case"en":return"inglés";case"por":return"portugués";default:return"Idioma no disponible"}},e.getIsoLanguageSubs=function(e){switch(e=(e=e||"").toLowerCase()){case"spa":return"español";case"eng":return"inglés";case"por":return"portugués";default:return"Sin Subtítulos"}},e.secondsToMinutes=function(e){var t=parseInt(e/3600)%24,r=parseInt(e/60)%60,e=e%60;return(0==t?"":t+":")+(r=r<10?"0"+r:r)+":"+(e=e<10?"0"+e:e)},e.getHrsText=function(e,t){return(e=e<10?"0"+e:e)+":"+(t=t<10?"0"+t:t)},e.getTimeFromTs=function(e){e=new Date(e);return this.getHrsText(e.getHours(),e.getMinutes())},e.hourMinutes=function(e){var t=parseInt(e/3600)%24,e=parseInt(e/60)%60;return{hours:t,minutes:0<e?e:1}},e.formatHourMinutes=function(e){e=this.hourMinutes(e);return(e.hours?e.hours+" hrs ":"")+e.minutes+" min"},e.itemsRecovery=function(){var e=[],t=AppConfig.profile.phones||[];0!==AppConfig.profile.mail.length&&e.unshift(new Choice({mail:AppConfig.profile.mail}));for(var r=0;r<t.length;r++)e.push(new Choice(t[r]));return e},e.findBookmark=function(e){for(var t,r=AppConfig.history,n=0,i=r.length;n<i;n++)r[n].contentId==e&&(t=r[n]);return t},e.cutMail=function(e){var t=e.split("@")[0],e=e.split("@")[1];return"****"+t.substr(t.length-3)+"@"+e},e.cutPhone=function(e){return"** ** ** "+e.substr(e.length-4)},e.splitPhone=function(e){return e},e.getProp=function(e,t){return t.split(".").reduce(function(e,t){return null==e?e:e[t]},e)},e.getImageFromObject=function(e,t,r){var n=this.getProp(AppConfig,"local_settings.backend.config.global.imageCdnUrl");return r&&e[t]?(n=(e=e[t]).baseUrl?e.baseUrl:n)+"/"+e.category+"/"+t+"/"+e.misId+"-"+r+"."+e.ext:""},e.numberWithCommas=function(e){if(e)return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e}(),Handlebars.registerHelper("getDay",function(e){return new Date(e).getDate()}),Handlebars.registerHelper("getWeekDay",function(e){return new Date(e).toLocaleString("es-mx",{weekday:"short"}).replace(".","")}),Handlebars.registerHelper("getMonth",function(e,t){return new Date(e).toLocaleString("es-mx",{month:t}).replace(".","")}),Handlebars.registerHelper("getDateString",function(e){e=new Date(e);return e.toLocaleString("es-mx",{weekday:"short"}).replace(".",",")+" "+e.getDate()}),Handlebars.registerHelper("getAvailableCredit",function(){return Number(AppConfig.credit_info.creditAvailable).toLocaleString("en")}),Handlebars.registerHelper("getName",function(){return AppConfig.name_profile}),Handlebars.registerHelper("moneyFormat",function(e){return Util.numberWithCommas(e)}),Handlebars.registerHelper("getHrText",function(e){return Util.getTimeFromTs(e)}),Handlebars.registerHelper("parsePlural",function(e){return e}),Handlebars.registerHelper("eachNumber",function(e,t){for(var r="",n=0,i=e;n<i;n++)r+=t.fn({index:n});return r}),Handlebars.registerHelper("getImage",function(e,t,r){e=Util.getProp(e,"images")||Util.getProp(e,"image");return Util.getImageFromObject(e,t,r)}),Handlebars.registerPartial("Header",Templates.Header),Handlebars.registerPartial("Shows",Templates.Shows),Handlebars.registerPartial("ShowTimes",Templates.ShowTimes),Handlebars.registerPartial("ZoneList",Templates.ZoneList),Handlebars.registerPartial("TicketList",Templates.TicketList);